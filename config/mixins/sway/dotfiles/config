# vim: syntax=sh


#### AUTOSTART ####
# init gnome keyring
# exec eval $(gnome-keyring-daemon --start --components=secrets,ssh,pkcs11)
# exec export SSH_AUTH_SOCK
exec bash /etc/scripts/sway-autostart.sh &


#### SWAY theme ####
font pango:JetBrainsMono Nerd Font 10
titlebar_padding 12 7
title_align center

default_border pixel 2
default_floating_border pixel 2
for_window [class=".*"] border pixel 2

gaps inner 15
gaps outer 0

# border_images.focused /etc/sway/borders/dropShadowDark.png
# border_images.focused_inactive /etc/sway/borders/dropShadowDark.png
# border_images.unfocused /etc/sway/borders/dropShadowDark.png
# border_images.urgent /etc/sway/borders/dropShadowDark.png


#### SWAY configuration ####

# You can get the names of your outputs by running: swaymsg -t get_outputs
# TODO: make it dynamic, use kanshi
# output eDP-1 disable
# output DP-3 resolution 3840x2160 scale 1.5
# output * bg /home/gean/Pictures/backgrounds/default.png fill

focus_follows_mouse yes

exec swayidle -w \
     timeout 300 'bash /etc/scripts/sway-lock.sh' \
     timeout 600 'swaymsg "output * dpms off"' resume 'swaymsg "output * dpms on"' \
     before-sleep 'bash /etc/scripts/sway-lock.sh'

input * {
  natural_scroll enabled;
}

input "type:keyboard" {
  xkb_layout "us"
}

input "type:touchpad" {
  accel_profile "flat"
  pointer_accel 0
}

input "type:pointer" {
  accel_profile "flat"
  pointer_accel 0
  # calibration_matrix 8 0 0 0 5 0
}

seat * {
  xcursor_theme capitaine-cursors 32
  hide_cursor when-typing enable
}
exec gsettings set org.gnome.desktop.interface cursor-theme capitaine-cursors &
exec gsettings set org.gnome.desktop.interface cursor-size 32 &


#### SWAY rules ####
for_window [class=".*"] border pixel 2;
for_window [app_id=".*"] border pixel 2;
for_window [app_id="blueberry.py"] floating enable; move position center;
for_window [app_id="eog"] floating enable; move position center;
for_window [app_id="file-roller"] floating enable; move position center;
for_window [app_id="gnome-calculator"] floating enable; move position center; sticky enable;
for_window [app_id="org.gnome.Nautilus"] floating enable; move position center; sticky enable;
for_window [app_id=".thunar-wrapped_"] floating enable; move position center; sticky enable;
for_window [app_id="gnome-font-viewer"] floating enable; move position center;
for_window [app_id="gnome-system-monitor"] floating enable; move position center;
for_window [app_id="nm-connection-editor"] floating enable; move position center;
for_window [app_id="pavucontrol"] floating enable; move position center;
for_window [app_id="mpv"] floating enable; move position center;

assign [app_id="firefox"] workspace 5
assign [app_id="google-chrome"] workspace 1
assign [class="Google-chrome"] workspace 1
assign [app_id="slack"] workspace 4

for_window [app_id="kitty-top"] floating enable; move position center; sticky enable; resize set width 1500 px height 1200 px;
for_window [app_id="kitty-scratch"] floating enable; move position center; sticky enable; resize set width 1500 px height 1200 px;
for_window [app_id="kitty-neorg"] floating enable; move position center; sticky enable; resize set width 1500 px height 1200 px;
for_window [app_id="kitty-nmtui"] floating enable; move position center; sticky enable; resize set width 750 px height 1200 px;

# for_window [window_role="gimp-dock"] floating enable; move position center; resize shrink width 50 px or 50ppt


#### SWAY workspaces ####
exec firefox > /dev/null 2>&1 &
# exec google-chrome-stable > /dev/null 2>&1 &

include @sysconfdir@/sway/config.d/*

