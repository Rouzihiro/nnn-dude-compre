

### CONFIG

# Set app-ids of views which should use client side decorations
# riverctl csd-filter-add "firefox"

riverctl set-repeat 50 300
riverctl attach-mode "top"
riverctl focus-follows-cursor "normal"
riverctl set-cursor-warp on-output-change
riverctl border-width 2
riverctl hide-cursor when-typing enabled

for pad in $(riverctl list-inputs | grep -i pointer)
do
  riverctl input $pad natural-scroll enabled
  riverctl input $pad events enabled
  riverctl input $pad tap disabled
  riverctl input $pad disable-while-typing enabled
  # riverctl input $pad accel-profile flat
  # riverctl input $pad pointer-accel 0
done

for pad in $(riverctl list-inputs | grep -i mouse)
do
  riverctl input $pad natural-scroll disabled
  riverctl input $pad accel-profile flat
  riverctl input $pad pointer-accel 0
done


#### RULES

riverctl rule-add ssd -app-id "*"
riverctl rule-add float -app-id "file-roller"
riverctl rule-add float -app-id "gnome-font-viewer"
riverctl rule-add float -app-id "gnome-system-monitor"
riverctl rule-add float -app-id "mpv"
riverctl rule-add float -app-id "org.gnome.Calculator"
riverctl rule-add float -app-id "pavucontrol"
riverctl rule-add float -app-id "thunar"
riverctl rule-add float -app-id "thunar-scratch"
riverctl rule-add float -app-id "xdg-desktop-portal-gtk"

riverctl rule-add tag -app-id "firefox" $((1 << (5 - 1)))
riverctl rule-add tag -app-id "google-chrome" $((1 << (1 - 1)))
riverctl rule-add tag -app-id "brave-browser" $((1 << (8 - 1)))
riverctl rule-add tag -app-id "Slack" $((1 << (4 - 1)))

riverctl rule-add float -app-id "kitty-top"
riverctl rule-add float -app-id "kitty-scratch"
riverctl rule-add float -app-id "kitty-neorg"
riverctl rule-add float -app-id "kitty-nmtui"
riverctl rule-add float -app-id "kitty-neomutt"
riverctl rule-add float -app-id "kitty-newsboat"
riverctl rule-add float -app-id "kitty-ncmpcpp"


#### AUTOSTART
riverctl spawn "restart-pipewire-and-portal-services"
riverctl spawn "configure-gtk"

# Autostart apps
# start systemd services related to graphical-session.target
# https://github.com/emersion/xdg-desktop-portal-wlr/wiki/systemd-user-services,-pam,-and-environment-variables
riverctl spawn "systemctl --user start graphical-session.target"

riverctl spawn "bash /etc/scripts/river-autostart.sh"


#### LAYOUT

# Set and exec into the default layout generator, rivercarro.
# River will send the process group of the init executable SIGTERM on exit.
riverctl default-layout rivercarro
riverctl spawn "rivercarro -inner-gaps 0 -outer-gaps 0 -no-smart-gaps"

# vim: syntax=sh
